// Generated by CoffeeScript 1.3.3
(function() {
  var CMinion, Hapi, Minion, download, filepath, fs, host, port, server;

  fs = require("fs");

  Hapi = require("hapi");

  host = process.env.HOST || 'localhost';

  port = process.env.PORT || 3000;

  CMinion = require("../../minion");

  Minion = new CMinion();

  filepath = "/usr/share/dict/words";

  server = new Hapi.Server(host, port);

  download = {
    method: "GET",
    path: "/",
    config: {
      query: {
        id: Hapi.Types.String()
      },
      handler: function(req) {
        return fs.readFile(filepath, function(err, data) {
          if (err) {
            throw err;
          }
          req.reply(data.toString());
          return Minion.logRequest(req.query);
        });
      }
    }
  };

  server.addRoute(download);

  Minion.started();

  server.start();

}).call(this);
